module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=23)}([,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(4);var a=function(){"function L {q}function N {L}function S {d}function a {7}function E {t}function 6 {j}function Y {l}function K {O}";return new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"nextShow",value:function(){var e=this;return new Promise(function(t,n){e.isRuningMiniPro()?"function"==typeof wx.onAppShow?wx.onAppShow(function(e){t(e)}):console.log("当前基础库版本过低不支持该api"):e.isRuningMiniGame()?wx.onShow(function(e){t(e)}):t()})}},{key:"addPreHook",value:function(e,t){var n=["onShareAppMessage"],r=null;"App"===e&&(r=App),"Page"===e&&(r=Page);var a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=function(r){var a=t[r]||function(){};if(e[r]){var o=e[r];e[r]=function(){for(var e=this,t=arguments.length,u=Array(t),i=0;i<t;i++)u[i]=arguments[i];if(n.indexOf(r)>-1){var s=o.apply(this,u);return a.call.apply(a,[this,s].concat(u))}var f=a.apply(this,u);f&&f.then?f.then(function(){return o.apply(e,u)}).catch(function(){}):o.apply(this,u)}}else e[r]=a};for(var o in t)a(o);r(e)};"App"===e&&(App=a),"Page"===e&&(Page=a)}},{key:"normalizeRes",value:function(e){return e.errMsg||e.statusCode?e.data?{err:e.data.err||0,code:e.statusCode,message:e.data.msg,data:e.data.data}:{err:1,code:e.statusCode||999,message:e.errMsg}:{err:e.err,code:e.statusCode,message:"string"==typeof e?e:e.msg,data:e.data}}},{key:"promiseFy",value:function(e,t){var n=this,r={};if(t)for(var a in t)r[a]=t[a];return new Promise(function(t,a){r.success=function(e){(200===e.statusCode||e.errMsg.indexOf(":ok")>-1)&&t(e)},r.fail=function(e){a(n.normalizeRes(e))},e?e.call(wx,r):a({message:"miniProgramFn is not defined"})})}},{key:"addQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.stringifyQuery(t);return n?e.indexOf("?")>-1?e+"&"+n:e+"?"+n:e}},{key:"stringifyQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];for(var n in e){var r=e[n];r="string"==typeof r?r:"number"==typeof r&&isNaN(r)?"NaN":void 0===r?"undefined":JSON.stringify(r),t.push([n+"="+r])}return t.join("&")}},{key:"getCurrentRoute",value:function(){var e=getCurrentPages();return e[e.length-1]?"/"+e[e.length-1].route:"pages/index/index"}},{key:"getCurrentOptions",value:function(){var e=getCurrentPages();return e[e.length-1]?e[e.length-1].options:{}}},{key:"getCurrentFullUrl",value:function(){var e=this.getCurrentRoute(),t=this.getCurrentOptions();return this.addQuery(e,t)}},{key:"getNetWorkStatus",value:function(){var e=this;return this.getNetWorkStatusPromise||(this.getNetWorkStatusPromise=this.promiseFy(wx.getNetworkType),wx.onNetworkStatusChange(function(t){e.currNetWorkType=t.networkType})),Promise.resolve().then(function(){return e.getNetWorkStatusPromise}).then(function(t){return e.currNetWorkType?e.currNetWorkType:t.networkType}).catch(function(e){return{}})}},{key:"getSystemInfo",value:function(){return this.promiseFy(wx.getSystemInfo).catch(function(e){return{errMsg:e}})}},{key:"getLocationInfo",value:function(){return this.promiseFy(wx.getLocation,{type:"wgs84"}).catch(function(e){return{}})}},{key:"setStorage",value:function(e,t){return this.promiseFy(wx.setStorage,{key:e,data:t}).then(function(){return t}).catch(function(){})}},{key:"getStorage",value:function(e){return this.promiseFy(wx.getStorage,{key:e}).then(function(e){return e.data}).catch(function(){return""})}},{key:"getStorageSync",value:function(e){try{return wx.getStorageSync(e)}catch(e){return""}}},{key:"setStorageSync",value:function(e,t){try{wx.setStorageSync(e,t)}catch(e){console.error("setStorageSync error: ",e)}}},{key:"isRuningMiniPro",value:function(){return"function"==typeof getApp&&"undefined"==typeof GameGlobal&&"undefined"!=typeof wx}},{key:"isRuningMiniGame",value:function(){return"function"!=typeof getApp&&"undefined"!=typeof GameGlobal&&"undefined"!=typeof wx}},{key:"isEmptyObject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"{}"===JSON.stringify(e)}},{key:"getVariableType",value:function(e){return Number.isNaN(e)?NaN:Object.prototype.toString.call(e).slice(8,-1)}},{key:"deepClone",value:function(e){var t=this.getVariableType(e),n=void 0;if("Object"===t&&(n={}),"Array"===t&&(n=[]),!n)return e;for(var r in e){var a=e[r],o=this.getVariableType(a),u="Object"===o||"Array"===o;n[r]=u?this.deepClone(a):a}return n}},{key:"filterEmptyKey",value:function(e){if("Object"===this.getVariableType(e))for(var t in e=this.deepClone(e))"Object"===this.getVariableType(e[t])&&(e[t]=this.filterEmptyKey(e[t])),(null===e[t]||void 0===e[t]||""===e[t]||this.isEmptyObject(e[t]))&&delete e[t];return e}},{key:"makeResponse",value:function(e){var t=e.code;return{code:void 0===t?200:t,message:e.message}}}]),e}())}();t.default=a},function(e,t,n){"use strict";t.SDK_CONFIG={ENV:"prod",APPKEY:"52beba30-bd98-11e8-aab0-294230b0d9e6",APPID:"wx5401ab8855d01c48",PROGRAM_ID:"52beba31bd9811e8aab0294230b0d9e6",PROGRAM_SECRET:"52beba32bd9811e8aab0294230b0d9e6",SDKVERSION:"1.6.0",SHOULD_GET_LOCATION:false,JUMP_MINI_PROGRAM_ENV:"release"},t.HEART_BEAT_TIME_GAP=5e3,t.STORAGE_KEYS={USER_TID_STORAGE_KEY:"XH_USER_TID"},t.RESPONSE={NO_AVAILABLE_HOST:{message:"NO_AVAILABLE_HOST"},CUSTOM_EVENT_ID_IS_NULL:{message:"事件id必须为非空字符串"},CUSTOM_EVENT_DATA_LENGTH_EXCEED_LIMIT:{message:"自定义事件参数data长度不能超过512"},CUSTOM_EVENT_KEY_NOT_LEGAL:{message:"data参数中的value值都不能为undefined/null/NaN"},CUSTOM_EVENT_KEY_TYPE_ILLEGAL:{message:"key的值必须为Number或者String类型"},CUSTOM_EVENT_VALUE_TYPE_ILLEGAL:{message:"value的值必须为Number或者String类型"},CUSTOM_EVENT_KEY_LENGTH_EXCEED_LIMIT:{message:"key的长度不能超过16"},CUSTOM_EVENT_VALUE_LENGTH_EXCEED_LIMIT:{message:"value长度不能超过128"},CUSTOM_EVENT_DATA_EMPTY:{message:"data参数为空，请传入data参数"},EVENT_CALLTIMES_LIMITS:{message:"每秒钟不能调用超过10次"}}},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),a=u(n(3)),o=u(n(11));function u(e){return e&&e.__esModule?e:{default:e}}var i=function(){"function Y {S}function 9 {X}function y {h}function f {6}function 3 {2}function l {m}function j {W}function 0 {5}";var e={test:"http://test.kuaiyugo.com",pre:"https://h5game-log.kuaiyugo.com",prod:"https://h5game-log.kuaiyugo.com"},t={tigerBehaviour:function(){return e[r.SDK_CONFIG.ENV]+"/api/tiger/v1/collect_user_behaviour"},heartBeatRecordUrl:function(){return e[r.SDK_CONFIG.ENV]+"/ping"},loadingLog:function(){return e[r.SDK_CONFIG.ENV]+"/dataAnalysis/saveLoadingLog"},behaviorLog:function(){return e[r.SDK_CONFIG.ENV]+"/dataAnalysis/saveUserBehaviorLogV2"}},n={postLoadingLog:{method:"POST",urlMaker:function(e){return t.loadingLog()},dataMaker:function(e){return e}},postTigerBehaviour:{method:"POST",urlMaker:function(e){return t.tigerBehaviour()},dataMaker:function(e){return e}},postHeartBeatRecord:{method:"POST",urlMaker:function(){return t.heartBeatRecordUrl()},dataMaker:function(e){var t=e.uid,n=e.uidfp;return{aid:r.SDK_CONFIG.APPID,uidfp:n,uid:t}},noLog:!0},postBehaviorLog:{method:"POST",urlMaker:function(e){return t.behaviorLog()},dataMaker:function(e){return e}}};function u(e){e.apiName;var t=e.urlMaker,n=e.dataMaker,r=e.method,u=void 0===r?"GET":r,f=e.noLog,l=void 0!==f&&f,c=e.headerMaker;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Promise.resolve().then(function(){return o.default.networkRelink()}).then(function(){return a.default.promiseFy(wx.request,{url:t(e),method:u,data:n&&n(e),header:c?c(e):s()})}).then(function(r){var o=a.default.normalizeRes(r);try{!l&&i.REQUEST_LOG&&(console.warn("发起请求:"+u+t(e)),console.warn("请求Header: "+JSON.stringify(c?c(e):s())),console.warn("请求body: "+JSON.stringify(n&&n(e))),console.warn("请求response: ",r),console.warn("返回: ",o))}catch(e){console.error("请求日志打印时报错"+e)}return 200===o.code?Promise.resolve(o.data):Promise.reject(o)}).catch(function(r){var o=a.default.normalizeRes(r);try{console.warn("发起请求:"+u+t(e)),console.warn("请求Header: "+JSON.stringify(c?c(e):s())),console.warn("请求body: "+JSON.stringify(n&&n(e))),console.warn("请求response: ",r),console.warn("返回: ",o)}catch(e){console.error("请求日志打印时报错"+e)}return Promise.reject(o)})}}function s(){return{"content-type":"application/json"}}return new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(){for(var e in n){var r=n[e];r.apiName=e,this[e]=u(r)}for(var a in t)this.API_LIST=this.API_LIST||{},this.API_LIST[a]=t[a],this.REQUEST_LOG=!0}.call(this)}}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(e){return e&&e.__esModule?e:{default:e}}(n(3));var o=function(){"function v {A}function W {r}function c {r}function A {U}function a {M}function j {R}function 3 {V}function 5 {4}";var e={xhstat_options:"",xhstat_nwt:"",xhstat_sysInfo:"",xhstat_shareId:"",xhstat_shareId2:"",xhstat_channelCode:"",xhstat_page_path:"",xhstat_tid:"",xhstat_uuid:"",xhstat_sessionId:""};function t(n,r){if("String"===a.default.getVariableType(n))return t(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,r));e=Object.assign({},e,n)}return new(function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n)}return r(n,[{key:"set",value:function(){return t.apply(void 0,arguments)}},{key:"get",value:function(){return function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(n){var o=n.split(".");if(o.length>1){var u=r[o[0]];return void 0!==u?t(o.slice(1).join("."),u):void 0}return a.default.deepClone(r[n])}return a.default.deepClone(r)}.apply(void 0,arguments)}}]),n}())}();t.default=o},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(4),o=i(n(9)),u=i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}var s=null;t.default=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.API_RETRY_NETWORK_STATUS="none",this.APP_STATUS_SHOW_STAMPS=[],this.APP_STATUS_HIDE_STAMPS=[]}return r(e,[{key:"packLogData",value:function(e,t){"function t {x}function 5 {U}function z {S}function g {Y}function R {E}function X {x}function J {q}function s {X}";var n=o.default.get("xhstat_sysInfo"),r=n.system,i=n.brand,s=n.version,f=n.model,l=n.platform,c=n.SDKVersion,d=e&&["cancel","404","render","click","confirm","login","qrcodeLogin","qrcodeRender"].indexOf(e)>-1?{system:r,brand:i,version:s,model:f,platform:l,SDKVersion:c}:o.default.get("xhstat_sysInfo"),g="custom_event"===e?{n:"statistic_sdk",v:a.SDK_CONFIG.SDKVERSION,bv:o.default.get("xh_minipro_sdk_version")}:{n:"statistic_sdk",v:a.SDK_CONFIG.SDKVERSION,bv:o.default.get("xh_minipro_sdk_version"),device:d};a.SDK_CONFIG.SHOULD_GET_LOCATION&&(g.location=o.default.get("xhstat_Location"));var p={ak:a.SDK_CONFIG.APPKEY,aid:a.SDK_CONFIG.APPID,type:e,tid:o.default.get("xhstat_tid"),uid:o.default.get("xhstat_uuid"),pid:o.default.get("userInfo")&&o.default.get("userInfo").pid,uidfp:o.default.get("userInfo")&&o.default.get("userInfo").ofp};return-1===["t1","t2","t3"].indexOf(e)&&(p=Object.assign(p,{ccode:o.default.get("xhstat_channelCode"),path:u.default.isRuningMiniPro()?u.default.getCurrentFullUrl():"",sid:o.default.get("xhstat_shareId"),sid2:o.default.get("xhstat_shareId2"),scene:o.default.get("xhstat_options_scene"),seid:o.default.get("seid")})),t&&Object.assign(p,t),g.ext=u.default.filterEmptyKey(p),{userLog:g}}},{key:"networkRelink",value:function(){var e=this;return s||(s=new Promise(function(t,n){u.default.getNetWorkStatus().then(function(n){"none"!=n?t():wx.onNetworkStatusChange(function(n){n.isConnected&&"none"==e.API_RETRY_NETWORK_STATUS&&t(),e.API_RETRY_NETWORK_STATUS=n.networkType})}).catch(function(e){return{}})})),s}}]),e}())},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i(n(3)),o=(i(n(8)),i(n(9))),u=n(4);function i(e){return e&&e.__esModule?e:{default:e}}var s=null;t.default=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"getDataSync",value:function(e){"function R {K}function H {Q}function m {6}function l {d}function B {G}function v {A}function b {J}function B {S}";var t=this,n=o.default.get("xhstat_options")||{},r=u.STORAGE_KEYS.USER_TID_STORAGE_KEY,i=o.default.get("xhstat_tid")||a.default.getStorageSync(r);i||(i=this.getUnitCookieId(),a.default.setStorageSync(r,i));var s=o.default.get("xhstat_sysInfo")||wx.getSystemInfoSync(),f=o.default.get("xhstat_Location");u.SDK_CONFIG.SHOULD_GET_LOCATION&&!f?wx.getLocation({type:"wgs84",success:function(r){t.setData(n,i,s,r),e()}}):(this.setData(n,i,s,f),e())}},{key:"getShareEventId",value:function(){return this.getUnitCookieId().slice(10)}},{key:"getUnitCookieId",value:function(){return""+Date.now()+Math.floor(1e7*Math.random())}},{key:"getSDKCookieId",value:function(){"function E {I}function e {I}function w {p}function O {h}function 6 {C}function n {J}function r {h}function 5 {r}";var e=this,t=u.STORAGE_KEYS.USER_TID_STORAGE_KEY;return Promise.resolve().then(function(){return a.default.getStorage(t)}).then(function(n){return n||(n=e.getUnitCookieId(),a.default.setStorage(t,n))})}},{key:"getChannelCode",value:function(){"function j {D}function 6 {4}function 2 {5}function d {a}function B {p}function G {w}function q {R}function h {2}";var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.query=e.query||{};var t=e.query.channelCode;t||(t=((e.referrerInfo||{}).extraData||{}).channelCode);if(!t){var n=e.query.extraParam||"{}";try{n=JSON.parse(n)}catch(e){n={}}t=n.channelCode}return t}},{key:"getData",value:function(e){"function b {M}function h {B}function x {V}function W {j}function 7 {2}function k {l}function n {H}function 7 {J}";var t=this;return e&&o.default.set("xhstat_options",e),s||(s=Promise.all([this.getSDKCookieId(),a.default.getSystemInfo(),u.SDK_CONFIG.SHOULD_GET_LOCATION?a.default.getLocationInfo():Promise.resolve({})])),s.then(function(n){t.setData.apply(t,[e].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n)))})}},{key:"setData",value:function(){"function p {m}function Q {O}function j {8}function k {x}function K {b}function V {y}function n {5}function K {l}";var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2],r=arguments[3],u=e.query||{},i={xhstat_tid:t,xhstat_sysInfo:n,xhstat_Location:r},s=this.getChannelCode(e),f=void 0,l=void 0;a.default.isRuningMiniPro()&&(f=u.shareId||"",l=u.shareId2||""),a.default.isRuningMiniGame()&&(f=u.sid||"",l=u.sid2||""),u.seid&&(i.seid=u.seid),e.scene&&(i.xhstat_options_scene=e.scene),s&&(i.xhstat_channelCode=s),f&&(i.xhstat_shareId=f),l&&(i.xhstat_shareId2=l),o.default.set(i)}}]),e}())},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i(n(3)),o=i(n(8)),u=(i(n(9)),i(n(11)));function i(e){return e&&e.__esModule?e:{default:e}}t.default=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"send",value:function(){"function s {o}function a {W}function f {x}function h {E}function k {3}function 8 {C}function B {f}function F {Y}";var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];return Promise.resolve().then(function(){return u.default.packLogData(e,t)}).then(function(e){if(e.userLog.ext.uid)return o.default.postBehaviorLog(e)}).catch(function(e){console.error("[sendLog error]",e)})}},{key:"sendSync",value:function(e,t,n,r){"function 7 {y}function F {m}function n {K}function d {H}function 4 {y}function O {1}function L {A}function h {m}";var i=u.default.packLogData(e,t);if(i.userLog.ext.uid){var s=o.default.API_LIST.behaviorLog(),f={"content-type":"application/json"};console.warn("发起请求:",s),console.warn("请求header:",f),console.warn("请求body:",i),wx.request({url:s,header:f,data:i,method:"POST",complete:function(e){console.warn("请求response: ",e),console.warn("返回:",a.default.normalizeRes(e))},success:function(e){"function"==typeof n&&n(e)},fail:function(e){"function"==typeof r&&r(e)}})}}}]),e}())},,,,,,,,,function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=_(n(3)),o=_(n(8)),u=_(n(9)),i=n(4),s=_(n(13)),f=_(n(11)),l=_(n(24)),c=_(n(25)),d=_(n(26)),g=_(n(27)),p=_(n(14)),h=_(n(28));function _(e){return e&&e.__esModule?e:{default:e}}var v=function(){"function t {C}function n {P}function m {2}function t {C}function h {r}function C {W}function M {j}function C {9}";var e={},t={onAppLaunch:function(e){s.default.getData(e),a.default.isRuningMiniPro()&&(this.XH_STATISTIC=v)},onAppShow:function(e){console.log("appShow options: ",e),s.default.getData(e).then(function(){p.default.send("login_in"),d.default.start()})},onAppHide:function(e){s.default.getDataSync(function(){console.log("options: ",e),p.default.sendSync("login_out",{onHideOptions:e})}),d.default.stop()},onShareAppMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return g.default.onApp(e,t)},onPageShow:function(){},onGameShow:function(t){e.onGameShow?wx.onShow(function(e){t&&t(e)}):(e.onGameShow=!0,wx.onShow(function(e){f.default.APP_STATUS_SHOW_STAMPS.push(Date.now()),console.log("appShow options: ",e),s.default.getData(e).then(function(){p.default.sendSync("login_in"),d.default.start()}),t&&t(e)}))},onGameHide:function(t){e.onGameHide?wx.onHide(function(e){t&&t(e)}):(e.onGameHide=!0,wx.onHide(function(e){f.default.APP_STATUS_HIDE_STAMPS.push(Date.now()),s.default.getDataSync(function(){p.default.sendSync("login_out",{onHideOptions:e})}),d.default.stop(),t&&t(e)}))},shareGameMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g.default.emitGame(e)},onShareGameMessage:function(e){return g.default.onGame(e)}},n={onAppLaunch:t.onAppLaunch,onAppShow:t.onAppShow,onAppHide:t.onAppHide,onShareAppMessage:t.onShareAppMessage,onPageShow:t.onPageShow},_={onShow:t.onGameShow,onHide:t.onGameHide,shareAppMessage:t.shareGameMessage,onShareAppMessage:t.onShareGameMessage};return new(function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a.default.isRuningMiniPro()&&(a.default.addPreHook("App",{onLaunch:n.onAppLaunch,onShow:n.onAppShow,onHide:n.onAppHide}),a.default.addPreHook("Page",{onShareAppMessage:n.onShareAppMessage,onShow:n.onPageShow})),a.default.isRuningMiniGame()){if(GameGlobal.XH_STATISTIC)return void console.error("数据SDK禁止再次初始化，请排查是否有引入多份的数据SDK");for(var t in GameGlobal.XH_STATISTIC=this,_)this[t]=_[t],"shareAppMessage"!==t&&_[t]();s.default.getDataSync(function(){c.default.send("appLoaded")})}}return r(e,[{key:"sendXHSDKVersion",value:function(e){e&&u.default.set("xh_minipro_sdk_version",e)}},{key:"sendShareCallBackConfig",value:function(e){e&&u.default.set("shareCallBackConfig",e)}},{key:"sendLoadingLog",value:function(e){s.default.getDataSync(function(){return Promise.resolve().then(function(){return c.default.send(e)})})}},{key:"sendTigerBehaviourSync",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l.default.send(e,t)}},{key:"packLogData",value:function(e,t){return f.default.packLogData(e,t)}},{key:"sendHeartBeatRecord",value:function(){return d.default.start()}},{key:"getSDKConfig",value:function(){return a.default.deepClone(i.SDK_CONFIG)}},{key:"sendUserInfo",value:function(e){e&&(u.default.set("userInfo",e),e.open_id&&u.default.set("xhstat_uuid",e.open_id))}},{key:"switchRequestLog",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).open;void 0!==e&&(o.default.REQUEST_LOG=e)}},{key:"sendLog",value:function(e,t){return p.default.sendSync(e,t)}},{key:"sendEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};return h.default.sendEvent(e,t,n,r)}}]),e}())}();e.exports=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=f(n(3)),o=f(n(8)),u=(f(n(9)),n(4)),i=f(n(13)),s=f(n(11));function f(e){return e&&e.__esModule?e:{default:e}}var l=0,c="test"===u.SDK_CONFIG.ENV?10:100,d={},g={};t.default=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a.default.deepClone(t),r=n.list,u=void 0===r?[]:r,f=Date.now();if((u=u.filter(function(t){var n=t.tiger_position_id+"_"+t.creative_id+"_"+e,r=d[n];return!(r&&f-r<6e4||g[n]>=c)})).length){n.list=u;var p=s.default.packLogData(e,n),h=this;i.default.getDataSync(function(){wx.request({url:o.default.API_LIST.tigerBehaviour(),data:p,method:"POST",success:function(t){u.forEach(function(t){var n=t.tiger_position_id+"_"+t.creative_id+"_"+e;d[n]=Date.now(),g[n]=g[n]||0,g[n]+=1}),l=0},fail:function(){if(l<5)return l+=1,h.send(e,t);l=0}})})}}}]),e}())},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=u(n(8)),o=(n(4),u(n(11)));function u(e){return e&&e.__esModule?e:{default:e}}var i=0,s=0,f=0,l={appLoaded:"t1",progressStart:"t2",progressEnd:"t3"},c=0,d=0;t.default=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"send",value:function(e){var t={},n=l[e];if("t1"===n)0===i&&(i=Date.now(),t=o.default.packLogData(n,{timeToStart:0}));else if("t2"===n)if(i){if(0!==s)return void console.warn("progressStart日志只能发送一次");o.default.APP_STATUS_HIDE_STAMPS.forEach(function(e,t){var n=o.default.APP_STATUS_SHOW_STAMPS[t+1];i<e&&n&&(c+=n-e)});var r=(s=Date.now())-i;t=o.default.packLogData(n,{timeToStart:r-c,timeToLast:r-c})}else console.error("progressStart类型日志必须在appLoaded(应用加载)日志之后发送");else if("t3"===n)if(s){if(0!==f)return void console.warn("progressEnd日志只能发送一次");o.default.APP_STATUS_HIDE_STAMPS.forEach(function(e,t){var n=o.default.APP_STATUS_SHOW_STAMPS[t+1];s<e&&n&&(d+=n-e)});var u=(f=Date.now())-i-d-c,g=f-s-d;t=o.default.packLogData(n,{timeToStart:u,timeToLast:g})}else console.error("progressEnd类型日志必须在progressStart之后发送");t.userLog?a.default.postLoadingLog(t):console.error("请传入正确日志的类型")}}]),e}())},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=u(n(8)),o=u(n(9));function u(e){return e&&e.__esModule?e:{default:e}}var i="";t.default=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"stop",value:function(){i&&clearInterval(i),i=""}},{key:"start",value:function(){var e=o.default.get("xhstat_uuid"),t=o.default.get("userInfo")&&o.default.get("userInfo").ofp;!i&&e&&t&&(a.default.postHeartBeatRecord({uid:e,uidfp:t}),i=setInterval(function(){a.default.postHeartBeatRecord({uid:e,uidfp:t})},5e3))}}]),e}())},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=s(n(3)),o=(s(n(8)),s(n(9))),u=(n(4),s(n(13))),i=s(n(14));s(n(11));function s(e){return e&&e.__esModule?e:{default:e}}var f=1,l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=a.default.deepClone(e),u.default.getDataSync(function(){return i.default.sendSync("share")});var t=e.channelCode,n=o.default.get("xhstat_uuid"),r=o.default.get("xhstat_shareId"),s=o.default.get("xhstat_shareId2"),l=e.success||function(){},c=e.cancel||function(){},d={seid:u.default.getShareEventId()};if(t&&(d.channelCode=t),s&&r?(r=s,s=n):r?s=n:r=n,a.default.isRuningMiniPro()){Object.assign(d,r?{shareId:r}:{}),Object.assign(d,s?{shareId2:s}:{});var g=e.path;e.path=g?a.default.addQuery(g,d):a.default.addQuery(a.default.getCurrentRoute(),d)}else{Object.assign(d,r?{sid:r}:{}),Object.assign(d,s?{sid2:s}:{});var p=e.query;e.query=p?p+"&"+a.default.stringifyQuery(d):a.default.stringifyQuery(d)}var h=Date.now();return a.default.nextShow().then(function(){var e=o.default.get("shareCallBackConfig")||{cyc:3};if(Date.now()-h>=1e3*e.cyc){for(var t=e.configs||[],n=0,r=0;r<t.length;r++)if(t[r].share_times==f){n=t[r].success_rate;break}var a=0!==n&&100*Math.random()<=n;a?f=1:a||(f=f>=t.length?1:f+1),i.default.sendSync("sharesuccess"),l({errMsg:"shareAppMessage:ok",isSharetoGroup:a})}else i.default.sendSync("sharecancel"),c({errMsg:"shareAppMessage:cancel"})}),delete e.success,delete e.cancel,console.log("shareConfig",e),e};t.default=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"onApp",value:function(){"function M {O}function M {9}function P {S}function 9 {C}function T {i}function G {R}function s {h}function 3 {0}";var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l(e)}},{key:"emitGame",value:function(){"function q {w}function w {T}function Q {y}function w {i}function E {V}function k {O}function 2 {E}function 1 {F}";var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wx.shareAppMessage(l(e))}},{key:"onGame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};wx.onShareAppMessage(function(){return l(e())})}}]),e}())},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=i(n(3)),o=i(n(14)),u=n(4);function i(e){return e&&e.__esModule?e:{default:e}}var s=10;setInterval(function(){s=10},1e3);t.default=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"sendEvent",value:function(){"function 8 {1}function b {j}function V {b}function m {a}function 1 {e}function e {D}function F {U}function 1 {v}";var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};if(""!=e&&"String"==a.default.getVariableType(e))if(JSON.stringify(t).length>512)r(a.default.makeResponse(u.RESPONSE.CUSTOM_EVENT_DATA_LENGTH_EXCEED_LIMIT));else{for(var i in t){if(!0===[void 0,null,NaN].includes(t[i]))return void r(a.default.makeResponse(u.RESPONSE.CUSTOM_EVENT_KEY_NOT_LEGAL));if(-1===["Number","String"].indexOf(a.default.getVariableType(t[i])))return void r(a.default.makeResponse(u.RESPONSE.CUSTOM_EVENT_VALUE_TYPE_ILLEGAL));if(i.length>16)return void r(a.default.makeResponse(u.RESPONSE.CUSTOM_EVENT_KEY_LENGTH_EXCEED_LIMIT));if(String(t[i]).length>128)return void r(a.default.makeResponse(u.RESPONSE.CUSTOM_EVENT_VALUE_LENGTH_EXCEED_LIMIT))}0!==s?(s-=1,o.default.sendSync("custom_event",{eventId:e,eventObj:t},n,r)):r(a.default.makeResponse(u.RESPONSE.EVENT_CALLTIMES_LIMITS))}else r(a.default.makeResponse(u.RESPONSE.CUSTOM_EVENT_ID_IS_NULL))}}]),e}())}]);
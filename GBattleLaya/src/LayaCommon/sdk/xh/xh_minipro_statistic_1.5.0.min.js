module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=23)}([,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(4);var o=function(){"function B {L}function 5 {i}function o {n}function z {s}function 7 {I}function 4 {B}function s {C}function 0 {a}";return new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"nextShow",value:function(){var e=this;return new Promise(function(t,n){e.isRuningMiniPro()?"function"==typeof wx.onAppShow?wx.onAppShow(function(e){t(e)}):console.log("当前基础库版本过低不支持该api"):e.isRuningMiniGame()?wx.onShow(function(e){t(e)}):t()})}},{key:"addPreHook",value:function(e,t){var n=["onShareAppMessage"],r=null;"App"===e&&(r=App),"Page"===e&&(r=Page);var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=function(r){var o=t[r]||function(){};if(e[r]){var a=e[r];e[r]=function(){for(var e=this,t=arguments.length,u=Array(t),i=0;i<t;i++)u[i]=arguments[i];if(n.indexOf(r)>-1){var s=a.apply(this,u);return o.call.apply(o,[this,s].concat(u))}var f=o.apply(this,u);f&&f.then?f.then(function(){return a.apply(e,u)}).catch(function(){}):a.apply(this,u)}}else e[r]=o};for(var a in t)o(a);r(e)};"App"===e&&(App=o),"Page"===e&&(Page=o)}},{key:"normalizeRes",value:function(e){return e.errMsg||e.statusCode?e.data?{err:e.data.err||0,code:e.statusCode,message:e.data.msg,data:e.data.data}:{err:1,code:e.statusCode||999,message:e.errMsg}:{err:e.err,code:e.statusCode,message:"string"==typeof e?e:e.msg,data:e.data}}},{key:"promiseFy",value:function(e,t){var n=this,r={};if(t)for(var o in t)r[o]=t[o];return new Promise(function(t,o){r.success=function(e){(200===e.statusCode||e.errMsg.indexOf(":ok")>-1)&&t(e)},r.fail=function(e){o(n.normalizeRes(e))},e?e.call(wx,r):o({message:"miniProgramFn is not defined"})})}},{key:"addQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.stringifyQuery(t);return n?e.indexOf("?")>-1?e+"&"+n:e+"?"+n:e}},{key:"stringifyQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];for(var n in e){var r=e[n];r="string"==typeof r?r:"number"==typeof r&&isNaN(r)?"NaN":void 0===r?"undefined":JSON.stringify(r),t.push([n+"="+r])}return t.join("&")}},{key:"getCurrentRoute",value:function(){var e=getCurrentPages();return e[e.length-1]?"/"+e[e.length-1].route:"pages/index/index"}},{key:"getCurrentOptions",value:function(){var e=getCurrentPages();return e[e.length-1]?e[e.length-1].options:{}}},{key:"getCurrentFullUrl",value:function(){var e=this.getCurrentRoute(),t=this.getCurrentOptions();return this.addQuery(e,t)}},{key:"getNetWorkStatus",value:function(){var e=this;return this.getNetWorkStatusPromise||(this.getNetWorkStatusPromise=this.promiseFy(wx.getNetworkType),wx.onNetworkStatusChange(function(t){e.currNetWorkType=t.networkType})),Promise.resolve().then(function(){return e.getNetWorkStatusPromise}).then(function(t){return e.currNetWorkType?e.currNetWorkType:t.networkType}).catch(function(e){return{}})}},{key:"getSystemInfo",value:function(){return this.promiseFy(wx.getSystemInfo).catch(function(e){return{errMsg:e}})}},{key:"getLocationInfo",value:function(){return this.promiseFy(wx.getLocation,{type:"wgs84"}).catch(function(e){return{}})}},{key:"setStorage",value:function(e,t){return this.promiseFy(wx.setStorage,{key:e,data:t}).then(function(){return t}).catch(function(){})}},{key:"getStorage",value:function(e){return this.promiseFy(wx.getStorage,{key:e}).then(function(e){return e.data}).catch(function(){return""})}},{key:"getStorageSync",value:function(e){try{return wx.getStorageSync(e)}catch(e){return""}}},{key:"setStorageSync",value:function(e,t){try{wx.setStorageSync(e,t)}catch(e){console.error("setStorageSync error: ",e)}}},{key:"isRuningMiniPro",value:function(){return"function"==typeof getApp&&"undefined"==typeof GameGlobal&&"undefined"!=typeof wx}},{key:"isRuningMiniGame",value:function(){return"function"!=typeof getApp&&"undefined"!=typeof GameGlobal&&"undefined"!=typeof wx}},{key:"isEmptyObject",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"{}"===JSON.stringify(e)}},{key:"getVariableType",value:function(e){return Number.isNaN(e)?NaN:Object.prototype.toString.call(e).slice(8,-1)}},{key:"deepClone",value:function(e){var t=this.getVariableType(e),n=void 0;if("Object"===t&&(n={}),"Array"===t&&(n=[]),!n)return e;for(var r in e){var o=e[r],a=this.getVariableType(o),u="Object"===a||"Array"===a;n[r]=u?this.deepClone(o):o}return n}},{key:"filterEmptyKey",value:function(e){if("Object"===this.getVariableType(e))for(var t in e)"Object"===this.getVariableType(e[t])&&(e[t]=this.filterEmptyKey(e[t])),(null===e[t]||void 0===e[t]||""===e[t]||this.isEmptyObject(e[t]))&&delete e[t];return e}},{key:"makeResponse",value:function(e){var t=e.code;return{code:void 0===t?200:t,message:e.message}}}]),e}())}();t.default=o},function(e,t,n){"use strict";t.SDK_CONFIG={ENV:"prod",APPKEY:"52beba30-bd98-11e8-aab0-294230b0d9e6",APPID:"wx5401ab8855d01c48",PROGRAM_ID:"52beba31bd9811e8aab0294230b0d9e6",PROGRAM_SECRET:"52beba32bd9811e8aab0294230b0d9e6",SDKVERSION:"1.5.0",SHOULD_GET_LOCATION:false,JUMP_MINI_PROGRAM_ENV:"release"},t.HEART_BEAT_TIME_GAP=5e3,t.STORAGE_KEYS={USER_TID_STORAGE_KEY:"XH_USER_TID"},t.RESPONSE={NO_AVAILABLE_HOST:{message:"NO_AVAILABLE_HOST"},CUSTOM_EVENT_ID_IS_NULL:{message:"事件id必须为非空字符串"},CUSTOM_EVENT_DATA_LENGTH_EXCEED_LIMIT:{message:"自定义事件参数data长度不能超过512"},CUSTOM_EVENT_KEY_NOT_LEGAL:{message:"data参数中的value值都不能为undefined/null/NaN"},CUSTOM_EVENT_KEY_TYPE_ILLEGAL:{message:"key的值必须为Number或者String类型"},CUSTOM_EVENT_VALUE_TYPE_ILLEGAL:{message:"value的值必须为Number或者String类型"},CUSTOM_EVENT_KEY_LENGTH_EXCEED_LIMIT:{message:"key的长度不能超过16"},CUSTOM_EVENT_VALUE_LENGTH_EXCEED_LIMIT:{message:"value长度不能超过128"},CUSTOM_EVENT_DATA_EMPTY:{message:"data参数为空，请传入data参数"},EVENT_CALLTIMES_LIMITS:{message:"每秒钟不能调用超过10次"}}},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=u(n(3)),a=u(n(11));function u(e){return e&&e.__esModule?e:{default:e}}var i=function(){"function i {P}function e {2}function w {M}function W {U}function t {Q}function Q {n}function 5 {q}function b {t}";var e={test:"https://h5game-log.kuaiyugo.com",pre:"https://h5game-log.kuaiyugo.com",prod:"https://h5game-log.kuaiyugo.com"},t={tigerBehaviour:function(){return e[r.SDK_CONFIG.ENV]+"/api/tiger/v1/collect_user_behaviour"},heartBeatRecordUrl:function(){return e[r.SDK_CONFIG.ENV]+"/ping"},loadingLog:function(){return e[r.SDK_CONFIG.ENV]+"/dataAnalysis/saveLoadingLog"},behaviorLog:function(){return e[r.SDK_CONFIG.ENV]+"/dataAnalysis/saveUserBehaviorLogV2"}},n={postLoadingLog:{method:"POST",urlMaker:function(e){return t.loadingLog()},dataMaker:function(e){return e}},postTigerBehaviour:{method:"POST",urlMaker:function(e){return t.tigerBehaviour()},dataMaker:function(e){return e}},postHeartBeatRecord:{method:"POST",urlMaker:function(){return t.heartBeatRecordUrl()},dataMaker:function(e){var t=e.uid,n=e.uidfp;return{aid:r.SDK_CONFIG.APPID,uidfp:n,uid:t}},noLog:!0},postBehaviorLog:{method:"POST",urlMaker:function(e){return t.behaviorLog()},dataMaker:function(e){return e}}};function u(e){e.apiName;var t=e.urlMaker,n=e.dataMaker,r=e.method,u=void 0===r?"GET":r,f=e.noLog,c=void 0!==f&&f,l=e.headerMaker;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Promise.resolve().then(function(){return a.default.networkRelink()}).then(function(){return o.default.promiseFy(wx.request,{url:t(e),method:u,data:n&&n(e),header:l?l(e):s()})}).then(function(r){var a=o.default.normalizeRes(r);try{!c&&i.REQUEST_LOG&&(console.warn("发起请求:"+u+t(e)),console.warn("请求Header: "+JSON.stringify(l?l(e):s())),console.warn("请求body: "+JSON.stringify(n&&n(e))),console.warn("请求response: ",r),console.warn("返回: ",a))}catch(e){console.error("请求日志打印时报错"+e)}return 200===a.code?Promise.resolve(a.data):Promise.reject(a)}).catch(function(r){var a=o.default.normalizeRes(r);try{console.warn("发起请求:"+u+t(e)),console.warn("请求Header: "+JSON.stringify(l?l(e):s())),console.warn("请求body: "+JSON.stringify(n&&n(e))),console.warn("请求response: ",r),console.warn("返回: ",a)}catch(e){console.error("请求日志打印时报错"+e)}return Promise.reject(a)})}}function s(){return{"content-type":"application/json"}}return new function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),function(){for(var e in n){var r=n[e];r.apiName=e,this[e]=u(r)}for(var o in t)this.API_LIST=this.API_LIST||{},this.API_LIST[o]=t[o],this.REQUEST_LOG=!0}.call(this)}}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(e){return e&&e.__esModule?e:{default:e}}(n(3));var a=function(){"function J {T}function A {9}function j {c}function u {x}function 9 {R}function B {0}function 1 {3}function h {C}";var e={xhstat_options:"",xhstat_nwt:"",xhstat_sysInfo:"",xhstat_shareId:"",xhstat_shareId2:"",xhstat_channelCode:"",xhstat_page_path:"",xhstat_tid:"",xhstat_uuid:"",xhstat_sessionId:""};function t(n,r){if("String"===o.default.getVariableType(n))return t(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},n,r));e=Object.assign({},e,n)}return new(function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n)}return r(n,[{key:"set",value:function(){return t.apply(void 0,arguments)}},{key:"get",value:function(){return function t(n){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;if(n){var a=n.split(".");if(a.length>1){var u=r[a[0]];return void 0!==u?t(a.slice(1).join("."),u):void 0}return o.default.deepClone(r[n])}return o.default.deepClone(r)}.apply(void 0,arguments)}}]),n}())}();t.default=a},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(4),a=i(n(9)),u=i(n(3));function i(e){return e&&e.__esModule?e:{default:e}}var s=null;t.default=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.API_RETRY_NETWORK_STATUS="none",this.APP_STATUS_SHOW_STAMPS=[],this.APP_STATUS_HIDE_STAMPS=[]}return r(e,[{key:"packLogData",value:function(e,t){"function N {C}function 3 {O}function 8 {9}function e {v}function J {C}function k {O}function j {L}function V {v}";var n=a.default.get("xhstat_sysInfo"),r=n.system,i=n.brand,s=n.version,f=n.model,c=n.platform,l=n.SDKVersion,d=e&&["cancel","404","render","click","confirm","login","qrcodeLogin","qrcodeRender"].indexOf(e)>-1?{system:r,brand:i,version:s,model:f,platform:c,SDKVersion:l}:a.default.get("xhstat_sysInfo"),g="custom_event"===e?{n:"statistic_sdk",v:o.SDK_CONFIG.SDKVERSION,bv:a.default.get("xh_minipro_sdk_version")}:{n:"statistic_sdk",v:o.SDK_CONFIG.SDKVERSION,bv:a.default.get("xh_minipro_sdk_version"),device:d};o.SDK_CONFIG.SHOULD_GET_LOCATION&&(g.location=a.default.get("xhstat_Location"));var _={ak:o.SDK_CONFIG.APPKEY,aid:o.SDK_CONFIG.APPID,type:e,tid:a.default.get("xhstat_tid"),uid:a.default.get("xhstat_uuid"),pid:a.default.get("userInfo")&&a.default.get("userInfo").pid,uidfp:a.default.get("userInfo")&&a.default.get("userInfo").ofp};return-1===["t1","t2","t3"].indexOf(e)&&(_=Object.assign(_,{ccode:a.default.get("xhstat_channelCode"),path:u.default.isRuningMiniPro()?u.default.getCurrentFullUrl():"",sid:a.default.get("xhstat_shareId"),sid2:a.default.get("xhstat_shareId2"),scene:a.default.get("xhstat_options_scene"),seid:a.default.get("seid")})),t&&Object.assign(_,t),g.ext=u.default.filterEmptyKey(_),{userLog:g}}},{key:"networkRelink",value:function(){var e=this;return s||(s=new Promise(function(t,n){u.default.getNetWorkStatus().then(function(n){"none"!=n?t():wx.onNetworkStatusChange(function(n){n.isConnected&&"none"==e.API_RETRY_NETWORK_STATUS&&t(),e.API_RETRY_NETWORK_STATUS=n.networkType})}).catch(function(e){return{}})})),s}}]),e}())},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=i(n(3)),a=(i(n(8)),i(n(9))),u=n(4);function i(e){return e&&e.__esModule?e:{default:e}}var s=null;t.default=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"getDataSync",value:function(e){"function f {0}function d {c}function i {H}function L {8}function o {3}function L {z}function q {l}function D {s}";var t=this,n=a.default.get("xhstat_options")||{},r=u.STORAGE_KEYS.USER_TID_STORAGE_KEY,i=a.default.get("xhstat_tid")||o.default.getStorageSync(r);i||(i=this.getUnitCookieId(),o.default.setStorageSync(r,i));var s=a.default.get("xhstat_sysInfo")||wx.getSystemInfoSync(),f=a.default.get("xhstat_Location");u.SDK_CONFIG.SHOULD_GET_LOCATION&&!f?wx.getLocation({type:"wgs84",success:function(r){t.setData(n,i,s,r),e()}}):(this.setData(n,i,s,f),e())}},{key:"getShareEventId",value:function(){return this.getUnitCookieId().slice(10)}},{key:"getUnitCookieId",value:function(){return""+Date.now()+Math.floor(1e7*Math.random())}},{key:"getSDKCookieId",value:function(){"function Q {N}function k {W}function H {V}function 9 {c}function w {l}function A {0}function 0 {I}function O {J}";var e=this,t=u.STORAGE_KEYS.USER_TID_STORAGE_KEY;return Promise.resolve().then(function(){return o.default.getStorage(t)}).then(function(n){return n||(n=e.getUnitCookieId(),o.default.setStorage(t,n))})}},{key:"getChannelCode",value:function(){"function H {q}function O {D}function j {e}function h {R}function r {I}function v {r}function m {a}function H {g}";var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.query=e.query||{};var t=e.query.channelCode;t||(t=((e.referrerInfo||{}).extraData||{}).channelCode);if(!t){var n=e.query.extraParam||"{}";try{n=JSON.parse(n)}catch(e){n={}}t=n.channelCode}return t}},{key:"getData",value:function(e){"function X {P}function 3 {c}function j {c}function J {t}function a {R}function H {u}function o {7}function b {N}";var t=this;return e&&a.default.set("xhstat_options",e),s||(s=Promise.all([this.getSDKCookieId(),o.default.getSystemInfo(),u.SDK_CONFIG.SHOULD_GET_LOCATION?o.default.getLocationInfo():Promise.resolve({})])),s.then(function(n){t.setData.apply(t,[e].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n)))})}},{key:"setData",value:function(){"function g {N}function N {q}function y {i}function d {9}function 3 {e}function r {T}function O {t}function S {s}";var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2],r=arguments[3],u=e.query||{},i={xhstat_tid:t,xhstat_sysInfo:n,xhstat_Location:r},s=this.getChannelCode(e),f=void 0,c=void 0;o.default.isRuningMiniPro()&&(f=u.shareId||"",c=u.shareId2||""),o.default.isRuningMiniGame()&&(f=u.sid||"",c=u.sid2||""),u.seid&&(i.seid=u.seid),e.scene&&(i.xhstat_options_scene=e.scene),s&&(i.xhstat_channelCode=s),f&&(i.xhstat_shareId=f),c&&(i.xhstat_shareId2=c),a.default.set(i)}}]),e}())},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=i(n(3)),a=i(n(8)),u=(i(n(9)),i(n(11)));function i(e){return e&&e.__esModule?e:{default:e}}t.default=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"send",value:function(){"function g {V}function 0 {w}function V {v}function 1 {p}function P {s}function D {G}function o {Q}function e {L}";var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];return Promise.resolve().then(function(){return u.default.packLogData(e,t)}).then(function(e){if(e.userLog.ext.uid)return a.default.postBehaviorLog(e)}).catch(function(e){console.error("[sendLog error]",e)})}},{key:"sendSync",value:function(e,t,n,r){"function r {W}function q {g}function M {e}function 2 {2}function 1 {N}function c {Y}function F {4}function g {3}";var i=u.default.packLogData(e,t);if(i.userLog.ext.uid){var s=a.default.API_LIST.behaviorLog(),f={"content-type":"application/json"};console.warn("发起请求:",s),console.warn("请求header:",f),console.warn("请求body:",i),wx.request({url:s,header:f,data:i,method:"POST",complete:function(e){console.warn("请求response: ",e),console.warn("返回:",o.default.normalizeRes(e))},success:function(e){"function"==typeof n&&n(e)},fail:function(e){"function"==typeof r&&r(e)}})}}}]),e}())},,,,,,,,,function(e,t,n){"use strict";var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=h(n(3)),a=h(n(8)),u=h(n(9)),i=n(4),s=h(n(13)),f=h(n(11)),c=h(n(24)),l=h(n(25)),d=h(n(26)),g=h(n(27)),_=h(n(14)),p=h(n(28));function h(e){return e&&e.__esModule?e:{default:e}}var v=function(){"function W {s}function Q {5}function L {X}function 6 {y}function 4 {p}function o {3}function B {u}function d {O}";var e={},t={onAppLaunch:function(e){s.default.getData(e),o.default.isRuningMiniPro()&&(this.XH_STATISTIC=v)},onAppShow:function(e){console.log("appShow options: ",e),s.default.getData(e).then(function(){_.default.send("login_in"),d.default.start()})},onAppHide:function(e){s.default.getDataSync(function(){_.default.sendSync("login_out")}),d.default.stop()},onShareAppMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];return g.default.onApp(e,t)},onPageShow:function(){},onGameShow:function(t){e.onGameShow?wx.onShow(function(e){t&&t(e)}):(e.onGameShow=!0,wx.onShow(function(e){f.default.APP_STATUS_SHOW_STAMPS.push(Date.now()),console.log("appShow options: ",e),s.default.getData(e).then(function(){_.default.sendSync("login_in"),d.default.start()}),t&&t(e)}))},onGameHide:function(t){e.onGameHide?wx.onHide(function(e){t&&t(e)}):(e.onGameHide=!0,wx.onHide(function(e){f.default.APP_STATUS_HIDE_STAMPS.push(Date.now()),s.default.getDataSync(function(){return _.default.sendSync("login_out")}),d.default.stop(),t&&t(e)}))},shareGameMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g.default.emitGame(e)},onShareGameMessage:function(e){return g.default.onGame(e)}},n={onAppLaunch:t.onAppLaunch,onAppShow:t.onAppShow,onAppHide:t.onAppHide,onShareAppMessage:t.onShareAppMessage,onPageShow:t.onPageShow},h={onShow:t.onGameShow,onHide:t.onGameHide,shareAppMessage:t.shareGameMessage,onShareAppMessage:t.onShareGameMessage};return new(function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o.default.isRuningMiniPro()&&(o.default.addPreHook("App",{onLaunch:n.onAppLaunch,onShow:n.onAppShow,onHide:n.onAppHide}),o.default.addPreHook("Page",{onShareAppMessage:n.onShareAppMessage,onShow:n.onPageShow})),o.default.isRuningMiniGame()){if(GameGlobal.XH_STATISTIC)return void console.error("数据SDK禁止再次初始化，请排查是否有引入多份的数据SDK");for(var t in GameGlobal.XH_STATISTIC=this,h)this[t]=h[t],"shareAppMessage"!==t&&h[t]();s.default.getDataSync(function(){l.default.send("appLoaded")})}}return r(e,[{key:"sendXHSDKVersion",value:function(e){e&&u.default.set("xh_minipro_sdk_version",e)}},{key:"sendLoadingLog",value:function(e){s.default.getDataSync(function(){return Promise.resolve().then(function(){return l.default.send(e)})})}},{key:"sendTigerBehaviourSync",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c.default.send(e,t)}},{key:"packLogData",value:function(e,t){return f.default.packLogData(e,t)}},{key:"sendHeartBeatRecord",value:function(){return d.default.start()}},{key:"getSDKConfig",value:function(){return o.default.deepClone(i.SDK_CONFIG)}},{key:"sendUserInfo",value:function(e){e&&(u.default.set("userInfo",e),e.open_id&&u.default.set("xhstat_uuid",e.open_id))}},{key:"switchRequestLog",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).open;void 0!==e&&(a.default.REQUEST_LOG=e)}},{key:"sendLog",value:function(e,t){return _.default.sendSync(e,t)}},{key:"sendEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};return p.default.sendEvent(e,t,n,r)}}]),e}())}();e.exports=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=f(n(3)),a=f(n(8)),u=(f(n(9)),n(4)),i=f(n(13)),s=f(n(11));function f(e){return e&&e.__esModule?e:{default:e}}var c=0,l="test"===u.SDK_CONFIG.ENV?10:100,d={},g={};t.default=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"send",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=o.default.deepClone(t),r=n.list,u=void 0===r?[]:r,f=Date.now();if((u=u.filter(function(t){var n=t.tiger_position_id+"_"+t.creative_id+"_"+e,r=d[n];return!(r&&f-r<6e4||g[n]>=l)})).length){n.list=u;var _=s.default.packLogData(e,n),p=this;i.default.getDataSync(function(){wx.request({url:a.default.API_LIST.tigerBehaviour(),data:_,method:"POST",success:function(t){u.forEach(function(t){var n=t.tiger_position_id+"_"+t.creative_id+"_"+e;d[n]=Date.now(),g[n]=g[n]||0,g[n]+=1}),c=0},fail:function(){if(c<5)return c+=1,p.send(e,t);c=0}})})}}}]),e}())},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(8)),a=(n(4),u(n(11)));function u(e){return e&&e.__esModule?e:{default:e}}var i=0,s=0,f=0,c={appLoaded:"t1",progressStart:"t2",progressEnd:"t3"},l=0,d=0;t.default=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"send",value:function(e){var t={},n=c[e];if("t1"===n)0===i&&(i=Date.now(),t=a.default.packLogData(n,{timeToStart:0}));else if("t2"===n)if(i){if(0!==s)return void console.warn("progressStart日志只能发送一次");a.default.APP_STATUS_HIDE_STAMPS.forEach(function(e,t){var n=a.default.APP_STATUS_SHOW_STAMPS[t+1];i<e&&n&&(l+=n-e)});var r=(s=Date.now())-i;t=a.default.packLogData(n,{timeToStart:r-l,timeToLast:r-l})}else console.error("progressStart类型日志必须在appLoaded(应用加载)日志之后发送");else if("t3"===n)if(s){if(0!==f)return void console.warn("progressEnd日志只能发送一次");a.default.APP_STATUS_HIDE_STAMPS.forEach(function(e,t){var n=a.default.APP_STATUS_SHOW_STAMPS[t+1];s<e&&n&&(d+=n-e)});var u=(f=Date.now())-i-d-l,g=f-s-d;t=a.default.packLogData(n,{timeToStart:u,timeToLast:g})}else console.error("progressEnd类型日志必须在progressStart之后发送");t.userLog?o.default.postLoadingLog(t):console.error("请传入正确日志的类型")}}]),e}())},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=u(n(8)),a=u(n(9));function u(e){return e&&e.__esModule?e:{default:e}}var i="";t.default=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"stop",value:function(){i&&clearInterval(i),i=""}},{key:"start",value:function(){var e=a.default.get("xhstat_uuid"),t=a.default.get("userInfo")&&a.default.get("userInfo").ofp;!i&&e&&t&&(o.default.postHeartBeatRecord({uid:e,uidfp:t}),i=setInterval(function(){o.default.postHeartBeatRecord({uid:e,uidfp:t})},5e3))}}]),e}())},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=s(n(3)),a=(s(n(8)),s(n(9))),u=(n(4),s(n(13))),i=s(n(14));s(n(11));function s(e){return e&&e.__esModule?e:{default:e}}var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=o.default.deepClone(e),u.default.getDataSync(function(){return i.default.sendSync("share")});var t=!1,n=e.channelCode,r=a.default.get("xhstat_uuid"),s=a.default.get("xhstat_shareId"),f=a.default.get("xhstat_shareId2"),c=e.success||function(){},l=e.cancel||function(){},d={seid:u.default.getShareEventId()};if(n&&(d.channelCode=n),f&&s?(s=f,f=r):s?f=r:s=r,o.default.isRuningMiniPro()){Object.assign(d,s?{shareId:s}:{}),Object.assign(d,f?{shareId2:f}:{});var g=e.path;e.path=g?o.default.addQuery(g,d):o.default.addQuery(o.default.getCurrentRoute(),d),e.success=function(e){i.default.sendSync("sharesuccess"),c(e),console.log("share success",e)}}else{Object.assign(d,s?{sid:s}:{}),Object.assign(d,f?{sid2:f}:{});var _=e.query;e.query=_?_+"&"+o.default.stringifyQuery(d):o.default.stringifyQuery(d);var p=Date.now();o.default.nextShow().then(function(){setTimeout(function(){t||(t=!0,i.default.sendSync("sharesuccess"),c({errMsg:"shareAppMessage:ok",shareConsume:Date.now()-p-200}),console.log("share success"))},200)}),delete e.success}return e.cancel=function(e){t||(t=!0,i.default.sendSync("sharecancel"),l(e),console.log("share cancel",e))},console.log("shareConfig",e),e};t.default=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"onApp",value:function(){"function y {z}function z {t}function L {r}function 0 {Q}function G {q}function 3 {e}function V {m}function i {q}";var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return f(e)}},{key:"emitGame",value:function(){"function L {4}function X {F}function b {S}function d {K}function 4 {p}function j {b}function u {u}function v {X}";var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wx.shareAppMessage(f(e))}},{key:"onGame",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};wx.onShareAppMessage(function(){return f(e())})}}]),e}())},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=i(n(3)),a=i(n(14)),u=n(4);function i(e){return e&&e.__esModule?e:{default:e}}var s=10;setInterval(function(){s=10},1e3);t.default=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"sendEvent",value:function(){"function o {d}function l {Q}function N {I}function w {t}function 6 {B}function L {a}function b {g}function q {1}";var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};if(""!=e&&"String"==o.default.getVariableType(e))if(o.default.isEmptyObject(t))r(o.default.makeResponse(u.RESPONSE.CUSTOM_EVENT_DATA_EMPTY));else{if(JSON.stringify(t).length>512)return void r(o.default.makeResponse(u.RESPONSE.CUSTOM_EVENT_DATA_LENGTH_EXCEED_LIMIT));for(var i in t){if(!0===[void 0,null,NaN].includes(t[i]))return void r(o.default.makeResponse(u.RESPONSE.CUSTOM_EVENT_KEY_NOT_LEGAL));if(-1===["Number","String"].indexOf(o.default.getVariableType(t[i])))return void r(o.default.makeResponse(u.RESPONSE.CUSTOM_EVENT_VALUE_TYPE_ILLEGAL));if(i.length>16)return void r(o.default.makeResponse(u.RESPONSE.CUSTOM_EVENT_KEY_LENGTH_EXCEED_LIMIT));if(String(t[i]).length>128)return void r(o.default.makeResponse(u.RESPONSE.CUSTOM_EVENT_VALUE_LENGTH_EXCEED_LIMIT))}if(0===s)return void r(o.default.makeResponse(u.RESPONSE.EVENT_CALLTIMES_LIMITS));s-=1,a.default.sendSync("custom_event",{eventId:e,eventObj:t},n,r)}else r(o.default.makeResponse(u.RESPONSE.CUSTOM_EVENT_ID_IS_NULL))}}]),e}())}]);